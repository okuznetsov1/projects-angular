<!DOCTYPE html>

<html lang="ru" ng-app="tcpdumpApp">
    
  <head>
      
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" href="css/lumx.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    
  </head>
  
  <body>
      
    <div ng-controller="TcpdumpController">

        <lx-button id="button-add" class="bgc-blue-300" lx-size="m" ng-click="showBlockAdd = ! showBlockAdd">Generator options for "tcpdump" command</lx-button>
        
        <div class="p pt0 bgc-amber-0" flex-container="column" flex-column="12" ng-show="showBlockAdd">

            <form id="add-form2" name="reviewForm2">

                <div flex-item="4" class="p p">
                </div>

                <div class="parametrs p pt0">
                    <lx-select ng-model="selectModel.selectParametrsNotSections" ng-change="test()"
                               lx-choices="selectSections"
                               lx-label="Нажмите и выберите ключи для tcpdump-команды"
                               lx-multiple="true"
                               lx-view-mode="chips">
                        <lx-select-selected>
                            {{ $selected.name }} 
                        </lx-select-selected>

                        <lx-select-choices>
                            {{ $choice.name }} ({{$choice.description}})
                        </lx-select-choices>
                    </lx-select>
                </div>

                <div flex-item="4" class="p p-">
                        <input type="text" class="add-row ng-dirty ng-invalid" placeholder='Кол-во пакетов после которого завершается работа' ng-model="newNumberPackages" ng-show="cNumberPackages == 2" autofocus>
                </div>

                <div flex-item="4" class="p p-">
                        <input type="text" class="add-row ng-dirty ng-invalid" placeholder='Имя сетевого интерфейса для захвата пакетов' ng-model="newNetInterface" ng-show="cClass == 1">
                </div>

                <div flex-item="4" class="p p-">
                        <input type="text" class="add-row ng-dirty ng-invalid" placeholder='Количество байтов пакета, которые будет обрабатывать tcpdump' ng-model="newNumberPackagesByte" ng-show="cNumberPackagesByte == 3">
                </div>

                <div flex-item="4" class="p p-">
                        <input type="checkbox" ng-model="myFilters"> Подключить фильтр(-ы) захвата
                </div>
                <div flex-item="4" class="p p-">
                        <input type="text" class="add-row ng-dirty ng-invalid" placeholder='Фильтр(-ы) захвата (введите в ручную)' ng-model="newFilters" ng-show="myFilters">
                </div>

                <div flex-item="4" class="p">
                </div>
                <div flex-item="4" class="p p-">
                    <lx-button lx-type="button" flex-item-order="1" class="bgc-red-300" lx-size="m" ng-click="runGenerate()">Generate</lx-button> 
                </div>
                
            </form>

            <div flex-item="4" class="p p+">
            </div>

            <form id="add-form" name="reviewForm" ng-submit="reviewForm.$valid && addTcpdumpTask()" novalidate>
                
                <div flex-item="4" class="p p-">
                    <input type="text" class="add-row" ng-model="newGenerationCommand" ng-readonly="true" ng-disabled="true" placeholder='Сгенерированная tcpdump-команда'>
                </div>
                <div flex-item="4" class="p p-">
                        <input type="text" class="add-row ng-dirty ng-invalid" placeholder='Текстовое описание команды' ng-model="newDescription">
                        <!--<div>{{newDescription}}</div>-->
                </div>
                <div flex-item="4" class="p p-">
                    <lx-button lx-type="submit" flex-item-order="2" class="bgc-red-300" lx-size="m">Save command</lx-button>
                </div>
                
            </form>

        </div>

        <div>
            <div class="tc-black-1 p pt++" flex-container="row" flex-column="12">
                <div id="header-col1" flex-item="1"><div class="p p-"><lx-checkbox lx-color="blue" ng-model="statusChecked" ng-click="markAll(statusChecked)"></lx-checkbox></div></div>
                <div flex-item="5"><div class="p p-"><b>Сохранённые команды</b></div></div>
                <div flex-item="2"><div class="p p-"><b>Примечание</b></div></div>
                <div flex-item="1"><div class="p p-"></div></div>
                <div flex-item="1"><div class="p p-"></div></div>
                <div flex-item="1"><div class="p p-"></div></div>
            </div>

            <div class="tc-black p pt0" flex-container="row" flex-column="12" ng-repeat="tcpdump in tcpdumplists | orderBy:'id':true">

                <div flex-item="1" id="header-col1" class="p p-">
                        <lx-checkbox lx-color="blue" ng-model="tcpdump.completed"></lx-checkbox>
                </div>
                 
                <div flex-item="5" class="p p-">
                        <div class="command">{{tcpdump.command}}</div>
                        <div ng-show="showBlock">
                            <form id="add-form" ng-submit="editTcpdumpCommand(tcpdump)">
                                <input type="text" id="button-edit1" class="edit-row" ng-model="tcpdump.command">
                                <lx-button id="button-ok1" class="bgc-red-300" lx-size="xs" ng-submit="editTcpdumpCommand(tcpdump)">ok</lx-button>
                            </form>
                        </div>
                </div>

                <div flex-item="2" class="p p-">
                        <div class="description">{{tcpdump.description}}</div>
                        <div ng-show="showBlock">
                            <form id="add-form" ng-submit="editTcpdumpDescription(tcpdump)">
                                <input type="text" id="button-edit7" class="edit-row" ng-model="tcpdump.description">
                                <lx-button id="button-ok7" class="bgc-red-300" lx-size="xs" ng-submit="editTcpdumpDescription(tcpdump)">ok</lx-button>
                            </form>
                        </div>
                </div>
                <div flex-item="1" id="header-col3" class="p p-">
                         <lx-button class="bgc-green-300" lx-size="xs" ng-click="showBlock = ! showBlock">edit</lx-button>
                </div>
                <div flex-item="1" id="header-col4" class="p p-">
                        <lx-button class="bgc-red-300" lx-size="xs" ng-click="deleteTcpdumpTask(tcpdump)">delete</lx-button>
                </div>

            </div>
            
            <div class="p">
                Всего строк: {{tcpdumplists.length}}
            </div>
            
        </div>
    </div>

    <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="js/velocity.min.js"></script>
    <script type="text/javascript" src="js/moment-with-locales.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/lumx.js"></script>
    <script type="text/javascript" src="js/app.js"></script>

  </body>
  
</html>